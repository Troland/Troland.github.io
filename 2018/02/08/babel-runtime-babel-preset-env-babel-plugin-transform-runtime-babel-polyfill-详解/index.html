<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Frontend, Mobile, Nodejs, Life Essays, etc."><title>babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解 | Poeticlife</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解</h1><a id="logo" href="/.">Poeticlife</a><p class="description">大知闲闲，小知间间；大言炎炎，小言詹詹</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/categories/Tech/"><i class="fa fa-wrench"> 技术</i></a><a href="/categories/Essays/"><i class="fa fa-pencil"> 随笔</i></a><a href="/categories/works/"><i class="fa fa-briefcase"> 作品</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解</h1><div class="post-meta">Feb 8, 2018<span> | </span><span class="category"><a href="/categories/FrontEnd/">FrontEnd</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/" href="/2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>一直以来都对<code>babel-runtime</code>，<code>babel-preset-env</code>，<code>babel-plugin-transform-runtime</code>，<code>babel-polyfill</code>等库之间的关系，所以就去仔细研究下喽。</p>
<p>先简单介绍一下<code>Babel</code>。</p>
<blockquote>
<p>它是一个编译器可以让你使用最新版本的<code>ES</code>规范比如<code>ES2015（ES6）</code>，<code>ES2016（ES7）</code>，<code>ES2017（ES8）</code>的写法并把它编译成老的<code>ES5</code>的写法。</p>
</blockquote>
<p>意思即你可以使用最新的<code>JavaScript</code>规范的写法比如<code>async</code>等来写代码，然后<code>Babel</code>会帮你编译成<code>ES5</code>以兼容老旧的浏览器。</p>
<p>转换前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[1, 3, 5].reduce((accumulator, currentValue) =&gt; &#123;</div><div class="line">    return accumulator + currentValue;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>转换后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[1, 3, 5].reduce(function (accumulator, currentValue) &#123;</div><div class="line">    return accumulator + currentValue;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>文章中凡是以<code>@babel</code>开头的都是指的Babel 7.x的否则是Babel 6.x，<code>@</code>的意思可参考<a href="https://docs.npmjs.com/misc/scope" target="_blank" rel="external">npm 官方</a>，标星号的表示只有 @babel 版本的才会有的参数。</strong></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>可以选择全局或者本地安装，最好是依据项目本地安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D babel-cli</div></pre></td></tr></table></figure>
<p>在项目根目录下创建<code>.babelrc</code>文件来配置<code>Babel</code>或者是在<code>package.json</code>里面进行设置。</p>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p><code>babel script.js --out-file script-compiled.js</code> babel来编译输出</p>
<p><code>babel-node</code>是一个和<code>babel</code>一样功能的命令，但是它有缓存功能并且会编译 ES6 代码后再运行它。</p>
<h2 id="babel-polyfil"><a href="#babel-polyfil" class="headerlink" title="babel-polyfil"></a>babel-polyfil</h2><p>根据官网的表述由于<code>Babel</code>只是转换了语法比如箭头函数，但是并没有实现兼容那些新的原生方法比如<code>Promise</code>和 <code>Array.reduce</code>所以必须使用。它使用了<a href="https://github.com/zloirock/core-js" target="_blank" rel="external">core-js</a>和 <a href="https://facebook.github.io/regenerator/" target="_blank" rel="external">regenerator</a>。</p>
<p>必须安装为依赖<code>npm i babel-polyfill</code>。<br><strong>需要注意的是这个有一个弊端会污染全局的变量，后面会有解决方案。</strong></p>
<h2 id="babel-preset-env"><a href="#babel-preset-env" class="headerlink" title="babel-preset-env"></a>babel-preset-env</h2><p><code>npm i -D babel-preset-env</code>当不进行任何设置的时候和<code>babel-preset-latest</code>一样就是默认使用 <code>ES2015（ES6）</code>，<code>ES2016（ES7）</code>，<code>ES2017（ES8）</code>的新语法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [&quot;env&quot;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>这里有一个参数<code>useBuiltIns</code>，这个参数默认值为<code>false</code>意思是不为每个文件自动添加兼容插件，或者把 <code>import &quot;@babel/polyfill&quot;</code>根据不同目标环境拆分为多个的兼容插件。</p>
<p>比如当启用的时候：</p>
<p>输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &quot;@babel/polyfill&quot;;</div></pre></td></tr></table></figure>
<p>输出依据不同的输出环境：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">import &quot;core-js/modules/es7.string.pad-start&quot;;</div><div class="line">import &quot;core-js/modules/es7.string.pad-end&quot;;</div></pre></td></tr></table></figure>
<p>这里的输出环境即目标环境比如下 .babelrc：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [</div><div class="line">            &quot;last 2 versions&quot;</div><div class="line">          ]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>这里需要注意的是只有2.x版本的useBuiltIns参数才会有<code>usage</code>和<code>entry</code>选项，参见<a href="https://github.com/babel/babel-preset-env/issues/443" target="_blank" rel="external">这里</a>。</strong></p>
<p><code>useBuiltIns</code>在<code>babel 6</code>版本只有两个值<code>true</code>和<code>false</code>。默认<code>false</code>表示不自动为每个文件添加兼容插件或者把对<code>import &quot;@babel/polyfill&quot;</code>的引用依据不同的目标环境输出不同的兼容插件。</p>
<p>Babel 的插件有两种模式：</p>
<ul>
<li>正常模式，尽量贴近 ES6 的书写语法。</li>
<li>更类似 ES5 的代码</li>
</ul>
<p>loose选项大概的意思即编译出来的代码更像<code>ES5</code>而不是<code>ES6</code>的语法。<br>优缺点如下：</p>
<ul>
<li>编译出来的代码在旧的引擎中可能会运行得更快和兼容</li>
<li>缺点是在以后的版本中当从编译的ES6切换到原生ES6可能会有问题，不过这种情况极少。</li>
</ul>
<p>例如如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">class Point &#123;</div><div class="line">    constructor(x, y) &#123;</div><div class="line">        this.x = x;</div><div class="line">        this.y = y;</div><div class="line">    &#125;</div><div class="line">    toString() &#123;</div><div class="line">        return `($&#123;this.x&#125;, $&#123;this.y&#125;)`;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意看如下行（Ａ）那里的不同，一个是使用ES6语法一个是使用ES5。<br>正常模式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">var _createClass = (function () &#123;</div><div class="line">    function defineProperties(target, props) &#123;</div><div class="line">        for (var i = 0; i &lt; props.length; i++) &#123;</div><div class="line">            var descriptor = props[i];</div><div class="line">            descriptor.enumerable = descriptor.enumerable || false;</div><div class="line">            descriptor.configurable = true;</div><div class="line">            if (&quot;value&quot; in descriptor) descriptor.writable = true;</div><div class="line">            Object.defineProperty(target, descriptor.key, descriptor); // (A)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return function (Constructor, protoProps, staticProps) &#123;</div><div class="line">        if (protoProps) defineProperties(Constructor.prototype, protoProps);</div><div class="line">        if (staticProps) defineProperties(Constructor, staticProps);</div><div class="line">        return Constructor;</div><div class="line">    &#125;;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123;</div><div class="line">    if (!(instance instanceof Constructor)) &#123;</div><div class="line">        throw new TypeError(&quot;Cannot call a class as a function&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var Point = (function () &#123;</div><div class="line">    function Point(x, y) &#123;</div><div class="line">        _classCallCheck(this, Point);</div><div class="line"></div><div class="line">        this.x = x;</div><div class="line">        this.y = y;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    _createClass(Point, [&#123;</div><div class="line">        key: &quot;toString&quot;,</div><div class="line">        value: function toString() &#123;</div><div class="line">            return &quot;(&quot; + this.x + &quot;, &quot; + this.y + &quot;)&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;]);</div><div class="line"></div><div class="line">    return Point;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>宽松模式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; ··· &#125;</div><div class="line"></div><div class="line">var Point = (function () &#123;</div><div class="line">    function Point(x, y) &#123;</div><div class="line">        _classCallCheck(this, Point);</div><div class="line"></div><div class="line">        this.x = x;</div><div class="line">        this.y = y;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Point.prototype.toString = function toString() &#123; // (A)</div><div class="line">        return &quot;(&quot; + this.x + &quot;, &quot; + this.y + &quot;)&quot;;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    return Point;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>具体可参见<a href="http://2ality.com/2015/12/babel6-loose-mode.html" target="_blank" rel="external">这里</a>。</p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p><code>Babel</code>是一个编译器，在高级层面它分三阶段解析，转换，生成代码。</p>
<h3 id="官方-Presets"><a href="#官方-Presets" class="headerlink" title="官方 Presets"></a>官方 Presets</h3><p>如果不想自己设置一堆插件的话，官方有<code>env</code>，<code>react</code>，<code>flow</code>三个 Presets。即预安装了 plugins 的配置。</p>
<h3 id="Stage-X（试验性-Presets）"><a href="#Stage-X（试验性-Presets）" class="headerlink" title="Stage-X（试验性 Presets）"></a>Stage-X（试验性 Presets）</h3><p>stage-x presets指的是任何未被包括在官方发布版比如（ES6/ES2015）中的草案。任何 <code>stage-3</code> 之前的都应该要谨慎使用，<br>一共有以下几个试验性的版本：</p>
<ul>
<li>Stage 0 - 草稿：只是一个设想可能是一个 Babel 插件</li>
<li>Stage 1 - 提案：值得去推进的东西</li>
<li>Stage 2 - 草案：初始化规范</li>
<li>Stage 3 - 候选：完整规范和初始化浏览器实现</li>
<li>Stage 4 - 完成：会加入到下一版中</li>
</ul>
<h3 id="转换插件"><a href="#转换插件" class="headerlink" title="转换插件"></a>转换插件</h3><p>有很多的转换插件具体可查看<a href="https://babeljs.io/docs/plugins/" target="_blank" rel="external">这里</a>。</p>
<h3 id="语法插件"><a href="#语法插件" class="headerlink" title="语法插件"></a>语法插件</h3><p>这种插件可以让 <code>Babel</code> 来解析特殊类型的语法。</p>
<blockquote>
<p>如果对应的转换插件已经使用了转换插件会自动使用语法插件。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;parserOpts&quot;: &#123;</div><div class="line">    &quot;plugins&quot;: [&quot;jsx&quot;, &quot;flow&quot;]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Plugins-Preset-路径"><a href="#Plugins-Preset-路径" class="headerlink" title="Plugins/Preset 路径"></a>Plugins/Preset 路径</h3><p>如果插件发布到npm上面则可以使用<code>&quot;plugins&quot;: [&quot;babel-plugin-myPlugin&quot;]</code>，也可以使用<code>&quot;plugins:&quot;: [&quot;./node_modules/pluginPath&quot;]</code>。</p>
<h3 id="Plugins-Preset-快捷方式"><a href="#Plugins-Preset-快捷方式" class="headerlink" title="Plugins/Preset 快捷方式"></a>Plugins/Preset 快捷方式</h3><p>如果插件前缀是<code>babel-plugin-</code>则可以使用<code>&quot;plugins:&quot;: [&quot;myPlugin&quot;]</code>，<code>presets</code>同理<br><code>&quot;presets&quot;: [&quot;@org/babel-preset-name&quot;]</code>。作用域包也是如此，<code>&quot;presets&quot;: [&quot;@org/babel-preset-name&quot;]</code> 快捷方式为：<code>&quot;presets&quot;: [&quot;@org/name&quot;]</code>。</p>
<h3 id="Plugin-Preset-顺序"><a href="#Plugin-Preset-顺序" class="headerlink" title="Plugin/Preset 顺序"></a>Plugin/Preset 顺序</h3><p>当这两种插件同时处理代码的时候，将以插件或者preset的顺序来进行转换。</p>
<ul>
<li>插件在<code>presets</code>之前运行</li>
<li>插件顺序是从第一到最后</li>
<li>Preset顺序是相反的从最后到第一</li>
</ul>
<p>比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    &quot;transform-decorators-legacy&quot;,</div><div class="line">    &quot;transform-class-properties&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将会先运行<code>transform-decorators-legacy</code>后<code>transform-class-properties</code>。</p>
<p>Presets的顺序是相反的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    &quot;es2015&quot;,</div><div class="line">    &quot;react&quot;,</div><div class="line">    &quot;stage-2&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将会以<code>stage-2</code>，<code>react</code> 和 <code>es2015</code>的顺序运行。这主要是因为向后兼容性，因为大多数用户把<code>es2015</code> 放在 <code>stage-0</code> 之前。</p>
<h3 id="Plugins-和-Preset-参数"><a href="#Plugins-和-Preset-参数" class="headerlink" title="Plugins 和 Preset 参数"></a>Plugins 和 Preset 参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    [&quot;transform-async-to-module-method&quot;, &#123;</div><div class="line">      &quot;module&quot;: &quot;bluebird&quot;,</div><div class="line">      &quot;method&quot;: &quot;coroutine&quot;</div><div class="line">    &#125;]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [&quot;es2015&quot;, &#123;</div><div class="line">      &quot;loose&quot;: true,</div><div class="line">      &quot;modules&quot;: false</div><div class="line">    &#125;]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="开发插件"><a href="#开发插件" class="headerlink" title="开发插件"></a>开发插件</h3><p>参考<a href="https://github.com/thejameskyle/babel-handbook" target="_blank" rel="external">babel-handbook</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">export default function () &#123;</div><div class="line">  return &#123;</div><div class="line">    visitor: &#123;</div><div class="line">      Identifier(path) &#123;</div><div class="line">        const name = path.node.name;</div><div class="line">        // reverse the name: JavaScript -&gt; tpircSavaJ</div><div class="line">        path.node.name = name.split(&quot;&quot;).reverse().join(&quot;&quot;);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="开发-Preset"><a href="#开发-Preset" class="headerlink" title="开发 Preset"></a>开发 Preset</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Presets can contain other presets, and plugins with options.</div><div class="line">module.exports = &#123;</div><div class="line">  presets: [</div><div class="line">    require(&quot;babel-preset-es2015&quot;),</div><div class="line">  ],</div><div class="line">  plugins: [</div><div class="line">    [require(&quot;babel-plugin-transform-es2015-template-literals&quot;), &#123; spec: true &#125;],</div><div class="line">    require(&quot;babel-plugin-transform-es3-member-expression-literals&quot;),</div><div class="line">  ],</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>查看<a href="https://github.com/babel/babel/tree/master/packages/babel-preset-es2015" target="_blank" rel="external">es2015 preset</a>。</p>
<h3 id="Plugins-和-Preset-配合使用"><a href="#Plugins-和-Preset-配合使用" class="headerlink" title="Plugins 和 Preset 配合使用"></a>Plugins 和 Preset 配合使用</h3><p>如果Plugins和Preset配合使用的话假设如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [&quot;@babel/plugin-transform-for-of&quot;],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [&quot;@babel/preset-env&quot;, &#123;</div><div class="line">      &quot;targets&quot;: &#123;</div><div class="line">        &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;not ie &lt;= 10&quot;],</div><div class="line">      &#125;,</div><div class="line">      &quot;debug&quot;: true,</div><div class="line">    &#125;],</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上 <code>@babel</code> 指的是在<code>babel</code>组织下的相关包这里即是兼容的<code>babel 7.x</code> 版本。按照解析的规则是 <code>plugins</code>先于<code>presets</code>，之后再进入<code>presets</code>，转化出来的代码是一样的，因为<code>@babel/preset-env</code>即是兼容了那个<code>es6</code>的<code>for...of</code> 写法。</p>
<h3 id="babel-runtime-和-babel-plugin-transform-runtime"><a href="#babel-runtime-和-babel-plugin-transform-runtime" class="headerlink" title="babel-runtime 和 babel-plugin-transform-runtime"></a>babel-runtime 和 babel-plugin-transform-runtime</h3><p>先来介绍 babel-plugin-transform-runtime。</p>
<blockquote>
<p>需要注意的是实例方法例如<code>&quot;foobar&quot;.includes(&quot;foo&quot;)</code>因为会更改内置的方法所以不会正常工作需要引用<code>babel-polyfill</code> 。</p>
</blockquote>
<p>这个插件的作用有两个：</p>
<ul>
<li><p>由于<code>Babel</code>使用工具函数作为常用函数比如<code>_extend</code>。默认情况下会被添加进每个文件中。这样就会导致重复，特别是当程序包含了多个文件。所有的工具函数都会引用模块<code>babel-runtime</code>来减少代码重复，运行时会被编译进构建的代码之中。</p>
</li>
<li><p>另一个作用是代码提供一个沙箱环境。当你使用<code>babel-polyfill</code>和其内置的诸如 <code>Promise</code>, <code>Set</code> 等新 API，这些会污染全局变量。当是一个 app 的时候或者是一个命令行工具的时候不会有问题，但是如果是想要发布来给别人用的时候就会因为无法控制目标环境而出现问题。</p>
</li>
</ul>
<p>这个转换插件将对这些内置函数的引用指向<code>core-js</code>这样就可以不需要使用 polyfill。<br>一般情况下需要安装<code>babel-plugin-transform-runtime</code>来作为一个开发依赖包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D babel-plugin-transform-runtime</div></pre></td></tr></table></figure>
<p>然后安装<code>babel-runtime</code>来作为生产环境的依赖包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i babel-runtime</div></pre></td></tr></table></figure>
<p>转换插件只是在开发环境使用，但是运行时插件依赖于部署发布的代码。<br>在 .babelrc 中使用如下配置即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    [&quot;transform-runtime&quot;, &#123;</div><div class="line">      &quot;helpers&quot;: false,</div><div class="line">      &quot;polyfill&quot;: false,</div><div class="line">      &quot;regenerator&quot;: true,</div><div class="line">      &quot;moduleName&quot;: &quot;babel-runtime&quot;</div><div class="line">    &#125;]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h4><ul>
<li><p>helpers</p>
<p>默认为 true，是否内联的 Babel 工具函数替换为对模块的引用。<br>即以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>  一般会转换为：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">  function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line">  </div><div class="line">  var Person = function Person() &#123;</div><div class="line">    _classCallCheck(this, Person);</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
<p>  使用 <code>babel-runtime</code> 转换插件会转换为：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">  var _classCallCheck2 = require(&quot;babel-runtime/helpers/classCallCheck&quot;);</div><div class="line">  </div><div class="line">  var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);</div><div class="line">  </div><div class="line">  function _interopRequireDefault(obj) &#123; return obj &amp;&amp; obj.__esModule ? obj : &#123; default: obj &#125;; &#125;</div><div class="line">  </div><div class="line">  var Person = function Person() &#123;</div><div class="line">    (0, _classCallCheck3.default)(this, Person);</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
<p>  这里在实际操作过程中需要添加类似如下的代码否则是不会进行任何转换：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line"> &quot;plugins&quot;: [</div><div class="line">   [&quot;@babel/plugin-transform-runtime&quot;, &#123;</div><div class="line">      &quot;moduleName&quot;: &quot;@babel/runtime&quot;</div><div class="line">  &#125;]</div><div class="line"> ],</div><div class="line"> &quot;presets&quot;: [</div><div class="line">  [</div><div class="line">    &quot;@babel/preset-env&quot;,</div><div class="line">    &#123;</div><div class="line">      &quot;targets&quot;: &#123;</div><div class="line">        &quot;browsers&quot;: [</div><div class="line">          &quot;last 2 versions&quot;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line"> ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>polyfill</p>
<p>默认 true，是否允许让内置的诸如<code>Promise</code>，<code>Set</code>，<code>Map</code>使用不会污染全局作用域的兼容插件。</p>
</li>
</ul>
<ul>
<li><p>regenerator</p>
<p>默认为 true，是否设置生成器函数是否使用再生器运行时插件来避免污染全局作用域。</p>
</li>
<li><p>moduleName</p>
<p>默认为<code>&quot;babel-runtime&quot;</code>。当使用工具函数的时候设置模块的名称 / 路径。</p>
</li>
<li><p>useBuiltIn*</p>
<p>默认为 false。当启用的意思即当使用工具函数的时候不再引用<code>core-js</code>中的兼容插件。</p>
</li>
<li><p>useESModules*</p>
<p>默认 false，当启用的时候转换插件就不会使用经过 <strong>@babel/plugin-transform-modules-commonjs</strong> 处理的工具函数。这样有利于为诸如 webpack 的模块构建系统减少构建包的大小，因为 webpack 不需要保存 commonjs 的语法。</p>
</li>
</ul>
<h2 id="babel-plugin-transform-runtime，babel-preset-env，babel-polyfill-的使用"><a href="#babel-plugin-transform-runtime，babel-preset-env，babel-polyfill-的使用" class="headerlink" title="babel-plugin-transform-runtime，babel-preset-env，babel-polyfill 的使用"></a>babel-plugin-transform-runtime，babel-preset-env，babel-polyfill 的使用</h2><p>  这三个插件是如何配合的？这里主要是因为 Babel 7 和 Babel 6，会造成一些区别，分情况来说明吧。</p>
<p>  举个例子吧，目录结构如下：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">|-----build</div><div class="line">|      |</div><div class="line">|      |----test.js</div><div class="line">|      |----test-compiled.js </div><div class="line">|</div><div class="line">|-----.babelrc</div><div class="line">|</div><div class="line">|-----package.json</div><div class="line">|</div><div class="line">|-----webpack.config.js</div></pre></td></tr></table></figure>
<p>  执行如下命令</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkdir babel-learn</div><div class="line"></div><div class="line">npm init -y</div><div class="line"></div><div class="line">npm i -D  @babel/cli @babel/core @babel/plugin-transform-runtime @babel/preset-env webpack@3.7.1</div><div class="line"></div><div class="line">npm i @babel/polyfill @babel/runtime</div></pre></td></tr></table></figure>
<ul>
<li><p>Babel 7</p>
<p>babel-preset-env 需要和 babel-polyfill 配合使用。例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [</div><div class="line">            &quot;last 2 versions&quot;</div><div class="line">          ]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: &quot;usage&quot;,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>package.json 中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;babel&quot;: &quot;babel build/test.js --out-file build/test-compiled.js&quot;</div></pre></td></tr></table></figure>
<p>运行 npm run babel 即可。</p>
<p>例一</p>
<p>.babelrc：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [</div><div class="line">            &quot;last 2 versions&quot;</div><div class="line">          ]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: &quot;usage&quot;,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>test.js 内容如下：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div><div class="line">    </div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line">    </div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">    </div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.promise&quot;);</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceofConstructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">  _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


可以看到上面是把 test.js 在目标浏览器环境下是通过引用 polyfill 的方式。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require(&quot;core-js/modules/es6.promise&quot;)</div></pre></td></tr></table></figure>


这里如果不想要用 commonjs 的方式引入兼容的插件可以设置 modules 参数。

例二

.babelrc：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: &quot;entry&quot;,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import &quot;@babel/polyfill&quot;;</div><div class="line"></div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.array.sort&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.date.to-json&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.typed.array-buffer&quot;);</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">  _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例三

当设置 useBuiltIns 为 false 的时候的输出。
test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import &quot;@babel/polyfill&quot;;</div><div class="line"></div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">require(&quot;@babel/polyfill&quot;);</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">  _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例四

.babelrc：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    [&quot;@babel/plugin-transform-runtime&quot;, &#123;</div><div class="line">      &quot;moduleName&quot;: &quot;@babel/runtime&quot;</div><div class="line">    &#125;]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var _Promise = require(&quot;@babel/runtime/core-js/promise&quot;);</div><div class="line"></div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new _Promise(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


可以看到上面的**Promise**并没有污染全局的**Promise**而是引用了**@babel/runtime/core-js/promise**。

例五

.babelrc：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    [&quot;@babel/plugin-transform-runtime&quot;, &#123;</div><div class="line">      &quot;moduleName&quot;: &quot;@babel/runtime&quot;,</div><div class="line">    &#125;]</div><div class="line">  ],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: &quot;usage&quot;,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var _Promise = require(&quot;@babel/runtime/core-js/promise&quot;);</div><div class="line"></div><div class="line">var _classCallCheck = require(&quot;@babel/runtime/helpers/classCallCheck&quot;);</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">  _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new _Promise(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例六

.babelrc：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    [&quot;@babel/plugin-transform-runtime&quot;, &#123;</div><div class="line">      &quot;moduleName&quot;: &quot;@babel/runtime&quot;,</div><div class="line">    &#125;]</div><div class="line">  ],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;@babel/preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: &quot;entry&quot;,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import &quot;@babel/polyfill&quot;;</div><div class="line"></div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&quot;use strict&quot;;</div><div class="line"></div><div class="line">var _interopRequireDefault = require(&quot;@babel/runtime/helpers/interopRequireDefault&quot;);</div><div class="line"></div><div class="line">var _promise = _interopRequireDefault(require(&quot;@babel/runtime/core-js/promise&quot;));</div><div class="line"></div><div class="line">var _classCallCheck2 = _interopRequireDefault(require(&quot;@babel/runtime/helpers/classCallCheck&quot;));</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.array.sort&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.date.to-json&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.typed.array-buffer&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.typed.int8-array&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.symbol&quot;);</div><div class="line"></div><div class="line">require(&quot;core-js/modules/es6.number.parse-int&quot;);</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">  (0, _classCallCheck2.default)(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new _promise.default(function (resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">a.then(function () &#123;</div><div class="line">  console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


当 @babel/preset-env 中的 useBuiltIns 为 false 的时候和 usage 是一样的（但是必须是 test.js 中没有有 import polyfill）。
</code></pre><ul>
<li><p>Babel 6</p>
<p>例一<br>.babelrc：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;babel-preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: true,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">    _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例二

.babelrc 同例一。
test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;;</div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.array-buffer&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.int8-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint8-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint8-clamped-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.int16-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint16-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.int32-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint32-array&apos;);</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">    _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例三

.babelrc：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;babel-preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: false,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js 同例二。
test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line"></div><div class="line">require(&apos;babel-polyfill&apos;);</div><div class="line"></div><div class="line">function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">    _classCallCheck(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例四

.babelrc：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    &quot;transform-runtime&quot;</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>

test.js：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import _Promise from &apos;babel-runtime/core-js/promise&apos;;</div><div class="line"></div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new _Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例五

.babelrc 和例四一样。
test.js：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;;</div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import _Promise from &apos;babel-runtime/core-js/promise&apos;;</div><div class="line">import &quot;babel-polyfill&quot;;</div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new _Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例六

.babelrc：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">    &quot;transform-runtime&quot;</div><div class="line">  ],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [</div><div class="line">      &quot;babel-preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">        &quot;targets&quot;: &#123;</div><div class="line">          &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">        &#125;,</div><div class="line">        &quot;useBuiltIns&quot;: true,</div><div class="line">        &quot;debug&quot;: true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>


test.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;;</div><div class="line">class Person &#123;&#125;</div><div class="line"></div><div class="line">let a = new Promise(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line"></div><div class="line">var _promise = require(&apos;babel-runtime/core-js/promise&apos;);</div><div class="line"></div><div class="line">var _promise2 = _interopRequireDefault(_promise);</div><div class="line"></div><div class="line">var _classCallCheck2 = require(&apos;babel-runtime/helpers/classCallCheck&apos;);</div><div class="line"></div><div class="line">var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.array-buffer&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.int8-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint8-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.uint8-clamped-array&apos;);</div><div class="line"></div><div class="line">require(&apos;core-js/modules/es6.typed.int16-array&apos;);</div><div class="line">...还有其它兼容插件</div><div class="line"></div><div class="line">function _interopRequireDefault(obj) &#123; return obj &amp;&amp; obj.__esModule ? obj : &#123; default: obj &#125;; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">    (0, _classCallCheck3.default)(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new _promise2.default(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


例七

.babelrc 和例六一样。
test.js和例六比去掉

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;</div></pre></td></tr></table></figure>

test-compiled.js：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&apos;use strict&apos;;</div><div class="line"></div><div class="line">var _promise = require(&apos;babel-runtime/core-js/promise&apos;);</div><div class="line"></div><div class="line">var _promise2 = _interopRequireDefault(_promise);</div><div class="line"></div><div class="line">var _classCallCheck2 = require(&apos;babel-runtime/helpers/classCallCheck&apos;);</div><div class="line"></div><div class="line">var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);</div><div class="line"></div><div class="line">function _interopRequireDefault(obj) &#123; return obj &amp;&amp; obj.__esModule ? obj : &#123; default: obj &#125;; &#125;</div><div class="line"></div><div class="line">var Person = function Person() &#123;</div><div class="line">    (0, _classCallCheck3.default)(this, Person);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = new _promise2.default(function (resolve, reject) &#123;</div><div class="line">    console.log(&apos;Promise&apos;);</div><div class="line">    resolve();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">a.then(function () &#123;</div><div class="line">    console.log(&apos;resolved.&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">console.log(&apos;Hi&apos;);</div></pre></td></tr></table></figure>


设置 .babelrc 中 useBuiltIns 为 false 和上面是一样的结果。
当设置 .babelrc 中 useBuiltIns 为 false 并且`test.js`中添加

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;;</div></pre></td></tr></table></figure>


则输出会多一句

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require(&apos;babel-polyfill&apos;);</div></pre></td></tr></table></figure>


当设置 .babelrc 中 useBuiltIns 为 true 并且 test.js 中添加

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &quot;babel-polyfill&quot;</div></pre></td></tr></table></figure>


则输出会多

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">require(&apos;core-js/modules/es6.typed.int16-array&apos;);</div><div class="line">require(&apos;core-js/modules/es6.typed.uint16-array&apos;);</div><div class="line">require(&apos;core-js/modules/es6.typed.array-buffer&apos;);</div><div class="line">...还有其它</div></pre></td></tr></table></figure>
</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>  <strong>这里有一个非常重要的问题就是关于 transform-runtime <a href="https://babeljs.io/docs/plugins/transform-runtime/#core-js-aliasing" target="_blank" rel="external">官方文档</a>上写的关于有些方法必须使用 babel-polyfill 中的方法。</strong></p>
<p>  <strong>那么这样导致的结果就是如果是在 Babel 6 中的时候当在源文件中写上</strong>“foobar”.includes(“foo”)<strong>就必须写上<em>import “babel-polyfill”;</em>。</strong></p>
<p>  <strong>但是Babel 7就不需要在源文件中写<em>import “@babel/polyfill”;</em>会智能判断是否需要去引用这个<code>includes</code>的 polyfill。</strong></p>
<p>  当<code>test.js</code>中有<strong>import “babel-polyfill”;</strong>的时候，Babel 6 版本的<strong>“useBuiltIns”: true</strong>即是 Babel 7 的<strong>“useBuiltIns”: “entry”</strong>。</p>
<p>  在 Babel 7 中即使是源文件中不写<strong>import “@babel/polyfill”;</strong>当设置<strong>“useBuiltIns”: “usage”</strong>会根据情况输出<strong>“@babel/polyfill”</strong>对应兼容插件的输出。</p>
<p>  安装<code>babel-polyfill</code>。</p>
<p>  当是 Babel 7 的时候使用 .babelrc 配置建议如下：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">      &quot;@babel/plugin-transform-runtime&quot;</div><div class="line">  ],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">  [</div><div class="line">    &quot;@babel/preset-env&quot;,</div><div class="line">    &#123;</div><div class="line">      &quot;targets&quot;: &#123;</div><div class="line">        &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">      &#125;,</div><div class="line">      &quot;useBuiltIns&quot;: &quot;usage&quot;,</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  Babel 6</p>
<p>  如果有使用<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [</div><div class="line">      &quot;transform-runtime&quot;</div><div class="line">  ],</div><div class="line">  &quot;presets&quot;: [</div><div class="line">      [</div><div class="line">      &quot;babel-preset-env&quot;,</div><div class="line">      &#123;</div><div class="line">          &quot;targets&quot;: &#123;</div><div class="line">              &quot;browsers&quot;: [&quot;last 2 versions&quot;, &quot;safari 7&quot;]</div><div class="line">          &#125;,</div><div class="line">          &quot;useBuiltIns&quot;: true,</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>  Babel 6 webpack 中的配置：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    index: [&quot;babel-polyfill&quot;, &quot;./test.js&quot;]</div><div class="line">  &#125;,</div><div class="line">  output: &#123;</div><div class="line">    filename: &apos;[name].bundle.js&apos;,</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">        &#123;</div><div class="line">            test: /\.js$/,</div><div class="line">            exclude: /(node_modules|bower_components)/,</div><div class="line">            use: &#123;</div><div class="line">                loader: &apos;babel-loader&apos;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>  Babel 7 webpack 配置：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry: [&quot;./test.js&quot;],</div><div class="line">  output: &#123;</div><div class="line">    filename: &apos;[name].bundle.js&apos;,</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">        &#123;</div><div class="line">            test: /\.js$/,</div><div class="line">            exclude: /(node_modules|bower_components)/,</div><div class="line">            use: &#123;</div><div class="line">                loader: &apos;babel-loader&apos;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/" data-id="cjeebrsfb0012miklp5ouk4uw" class="article-share-link">分享到</a><div class="tags"><a href="/tags/babel/">babel</a></div><div class="post-nav"><a href="/2018/01/13/Dcloud-个推总结/" class="next">DCloud 个推总结</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'troland';
var disqus_identifier = '2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/';
var disqus_title = 'babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解';
var disqus_url = 'http://yoursite.com/2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/favicon.ico',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//troland.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/">Backend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Essays/">Essays</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/Source/">Source</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/">backend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/Essays/">Essays</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/express/" style="font-size: 15px;">express</a> <a href="/tags/FrontEnd/" style="font-size: 15px;">FrontEnd</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/scrollSpy/" style="font-size: 15px;">scrollSpy</a> <a href="/tags/offset/" style="font-size: 15px;">offset</a> <a href="/tags/position/" style="font-size: 15px;">position</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/Dom/" style="font-size: 15px;">Dom</a> <a href="/tags/CurrentTarget/" style="font-size: 15px;">CurrentTarget</a> <a href="/tags/automate/" style="font-size: 15px;">automate</a> <a href="/tags/app/" style="font-size: 15px;">app</a> <a href="/tags/mui/" style="font-size: 15px;">mui</a> <a href="/tags/hybrid/" style="font-size: 15px;">hybrid</a> <a href="/tags/affix/" style="font-size: 15px;">affix</a> <a href="/tags/Hoisting/" style="font-size: 15px;">Hoisting</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/Buffer/" style="font-size: 15px;">Buffer</a> <a href="/tags/babel/" style="font-size: 15px;">babel</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/pageYOffset/" style="font-size: 15px;">pageYOffset</a> <a href="/tags/token/" style="font-size: 15px;">token</a> <a href="/tags/jwt/" style="font-size: 15px;">jwt</a> <a href="/tags/jsonwebtoken/" style="font-size: 15px;">jsonwebtoken</a> <a href="/tags/Mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/viewport/" style="font-size: 15px;">viewport</a> <a href="/tags/Design-Pattern/" style="font-size: 15px;">Design Pattern</a> <a href="/tags/Event-Proxy/" style="font-size: 15px;">Event Proxy</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/microtask/" style="font-size: 15px;">microtask</a> <a href="/tags/task/" style="font-size: 15px;">task</a> <a href="/tags/event-loop/" style="font-size: 15px;">event loop</a> <a href="/tags/animate/" style="font-size: 15px;">animate</a> <a href="/tags/css3/" style="font-size: 15px;">css3</a> <a href="/tags/1像素/" style="font-size: 15px;">1像素</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/人生感悟/" style="font-size: 15px;">人生感悟</a> <a href="/tags/愉快生活/" style="font-size: 15px;">愉快生活</a> <a href="/tags/fixed/" style="font-size: 15px;">fixed</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/">babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/13/Dcloud-个推总结/">DCloud 个推总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/任务，微任务，队列，计划/">任务，微任务，队列，计划</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/16/第五种定位属性/">第五种定位属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/09/常用-Git-命令及工作流/">常用 Git 命令及工作流</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/两种视口的故事系列之二/">两种视口的故事系列之二</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/03/两种视窗的故事系列之一/">两种视口的故事系列之一</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/19/事件委托，事件代理，发布者订阅者模式/">事件委托，事件代理，发布者订阅者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/12/动画收集/">动画收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/28/DOM相关/">DOM相关</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//troland.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.w.com/" title="医方" target="_blank">医方</a><ul></ul><a href="https://github.com/Troland" title="我的Github" target="_blank">我的Github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Poeticlife.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>