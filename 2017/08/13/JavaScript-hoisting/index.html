<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Frontend, Mobile, Nodejs, Life Essays, etc."><title>JavaScript-hoisting | Poeticlife</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">JavaScript-hoisting</h1><a id="logo" href="/.">Poeticlife</a><p class="description">大知闲闲，小知间间；大言炎炎，小言詹詹</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/categories/Tech/"><i class="fa fa-wrench"> 技术</i></a><a href="/categories/Essays/"><i class="fa fa-pencil"> 随笔</i></a><a href="/categories/works/"><i class="fa fa-briefcase"> 作品</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">JavaScript-hoisting</h1><div class="post-meta">Aug 13, 2017<span> | </span><span class="category"><a href="/categories/Tech/">Tech</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/08/13/JavaScript-hoisting/" href="/2017/08/13/JavaScript-hoisting/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>变量声明是任何一门语言最基础的一个方面.然而，JavaScript也一点诡异，也就是被称为<em>声明提升</em>,这会导致一个看起来无害的变量声明变成一个微妙的bug.本文将阐述什么是提升声明并且教你如何避免被其困扰。</p>
<p>JavaScript是一门极其灵活的语言，所以可以让你随心所欲地在任何一个地方声明变量。比如，以下的自执行函数声明了三个变量并且之后用警告框来显示它们。需要注意的是，你不应该使用<code>alert</code>警告框,但是我们在这里是试着来验证<code>hoisted</code>而已。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">  var foo = 1;</div><div class="line">  var bar = 2;</div><div class="line">  var baz = 3;</div><div class="line"></div><div class="line">  alert(foo + &quot; &quot; + bar + &quot; &quot; + baz);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>这看起来是平常的JavaScript代码。正如期望的那样，它显示字符串<code>&quot;1 2 3&quot;</code>.现在，假设我们移动<code>alert</code>代码的位置，就像下面这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">  var foo = 1;</div><div class="line">  alert(foo + &quot; &quot; + bar + &quot; &quot; + baz);</div><div class="line">  var bar = 2;</div><div class="line">  var baz = 3;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>如果有人确实写过这样的代码，有可能是不小心写错的。明显地，弹框会在变量<code>bar</code>和<code>baz</code>声明之前就执行。然而这是完全可用而且不会产生异常的JavaScript代码。然而<code>alert</code>会显示<code>1 undefined undefined</code>。</p>
<p>基于我们之前的试验，JavaScript可以引用未声明的变量。现在，让我们执行相同的自执行函数(IIFE),但是完全移除了<code>baz</code>变量的声明，如下所示。突然间，因为<code>baz</code>变量未定义我们收到一个<code>ReferenceError</code>错误.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">  var foo = 1;</div><div class="line">  alert(foo + &quot; &quot; + bar + &quot; &quot; + baz);</div><div class="line">  var bar = 2;</div><div class="line">&#125;)()</div></pre></td></tr></table></figure>
<p>这是一个有趣的行为。为了理解这里发生了什么，你得理解提升声明。<code>Hoisting</code>是JavaScript解析器把所有的变量和函数声明移到目前脚本作用范围的顶部的操作(这里的脚本作用范围如果是在函数内部则是函数作用范围,否则是全局范围)然而，只有实际声明的变量才会<code>hoisted</code>.任何赋值都会留在原来的位置。因而，我们的第二段自执行的函数可以转化为以下代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">  var foo;</div><div class="line">  var bar;</div><div class="line">  var baz;</div><div class="line"></div><div class="line">  foo = 1;</div><div class="line">  alert(foo + &quot; &quot; + bar + &quot; &quot; + baz);</div><div class="line">  bar = 2;</div><div class="line">  baz = 3;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>现在你明白了为什么第二个例子不会产生异常。在经过提升声明后，变量<code>bar</code>和<code>baz</code>实际上会在alert语句之前声明，即使是undefined值。在第三个例子中，变量<code>baz</code>被完全移除。这样就没有变量可以用来提升声明,因此alert语句会抛出异常。</p>
<p>另外，需要注意的是如下的代码也是会同样抛出<code>ReferenceError</code>错误:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line">  var foo = 1;</div><div class="line">  alert(foo + &quot; &quot; + bar);</div><div class="line">  bar = 2;</div><div class="line">&#125;)()</div></pre></td></tr></table></figure>
<h1 id="函数声明提升"><a href="#函数声明提升" class="headerlink" title="函数声明提升"></a>函数声明提升</h1><p>如前所述，函数声明也可以hoisted.然而,<strong>函数表达式不会提升声明</strong>。例如,得益于函数声明提升以下代码会如期正常运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">foo();</div><div class="line"></div><div class="line">function foo() &#123;</div><div class="line">  alert(&quot;Hello!&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然而，如下示例将肯定会失败。<code>foo</code>变量声明会提升在调用函数之前。然而，因为<code>foo</code>的赋值并没有提升,将会抛出一个由于试图调用一个非函数变量的异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">foo();</div><div class="line"></div><div class="line">var foo = function() &#123;</div><div class="line">  alert(&quot;Hello!&quot;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><em>提升声明</em>会影响变量生命周期，它包含了三个步骤:</p>
<ul>
<li>变量声明 - 创建变量。比如<code>var myvar</code></li>
<li>变量初始化 - 给变量赋值。比如<code>myvar = 150</code></li>
<li>访问变量 - 访问并且使用变量的值。比如<code>alert(myvar)</code></li>
</ul>
<p><em>提升声明</em>影响的范围:</p>
<ul>
<li>变量声明: 使用<code>var</code>, <code>let</code>或者<code>const</code>关键字</li>
<li>函数声明: 使用<code>function &lt;name&gt;(){...}</code>语法</li>
<li>类声明: 使用<code>class</code>关键字</li>
</ul>
<h1 id="函数作用域变量"><a href="#函数作用域变量" class="headerlink" title="函数作用域变量"></a>函数作用域变量</h1><p>声明的变量默认值是<code>undefined</code>.代码如下:<br><a href="http://jsbin.com/xizusi/edit?js,console" target="_blank" rel="external">打开Jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// Declare num variable</div><div class="line">var num;  </div><div class="line">console.log(num); // =&gt; undefined  </div><div class="line">// Declare and initialize str variable</div><div class="line">var str = &apos;Hello World!&apos;;  </div><div class="line">console.log(str); // =&gt; &apos;Hello World!&apos;</div></pre></td></tr></table></figure>
<h1 id="块作用范围-let"><a href="#块作用范围-let" class="headerlink" title="块作用范围:let"></a>块作用范围:let</h1><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" target="_blank" rel="external">let声明</a>在块作用范围内声明并且初始化变量:<code>let myvar,myvar2 = &#39;Init&#39;</code>。默认情况下一个声明没初始化的变量拥有<code>undefined</code>值.</p>
<p><em>let</em>是由es6的一个极大的补充，它允许让代码模块化并且封装在块语句范围内.<br><a href="http://jsbin.com/jeyono/edit?js,console" target="_blank" rel="external">打开Jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">if (true) &#123;  </div><div class="line">  // Declare name block variable</div><div class="line">  let month;  </div><div class="line">  console.log(month); // =&gt; undefined  </div><div class="line">  // Declare and initialize year block variable</div><div class="line">  let year = 1994;  </div><div class="line">  console.log(year); // =&gt; 1994</div><div class="line">&#125;</div><div class="line">// name and year or not accessible here, outside the block</div><div class="line">console.log(year); // ReferenceError: year is not defined</div></pre></td></tr></table></figure>
<h1 id="Hoisting和let"><a href="#Hoisting和let" class="headerlink" title="Hoisting和let"></a>Hoisting和let</h1><p>摘自这篇<a href="https://github.com/getify/You-Dont-Know-JS/issues/767#issuecomment-227946671" target="_blank" rel="external">文章</a>:</p>
<blockquote>
<p>From the code author’s perspective, “declaring” is the var x part and “initializing” is the x = 2 part. But from the perspective of the spec/engine, these shift. “Declaring” is like registering a variable to a scope, “initializing” is reserving space/memory/binding for that variable so it can be used (and giving it its initial undefined value), and “assigning” is giving it a value explicitly in code.</p>
<p>Declaring always happens at time of compilation, and its effect can be seen whenever a scope is first entered. Initializing for var happens at the beginning of the scope, whereas it happens at the site of the declarator for let and const. Initialization is what gives a value its initial undefined value. Assignment then is when you actually use = to assign something to it.</p>
</blockquote>
<p>大概意思是说:在代码的作者看来,<code>声明</code>就是var x部分而<code>初始化</code>是指的x=2.但是从es6文档来看,<br><code>声明</code>是指在作用范围内注册这个变量，<code>初始化</code>是指为变量保留空间/内存/绑定以便它可以被引用(并且赋值它初始值<code>undefined</code>),而<code>赋值</code>是指显式地在代码中赋值。</p>
<p>声明永远发生在编译时，当进入作用域就只可以引用它。var变量的初始化发生在作用范围顶部，而let和const是在声明它们的地方。初始化就是赋值一个未定义的初始值。然后赋值是当你确实用<code>=</code>来赋值。</p>
<p>换句话也就是说，当声明<code>let</code>和<code>const</code>的时候，在它们之前只是进行了变量的注册，而未初始化，所以在<code>let</code>和<code>const</code>之前引用变量会出现<strong>变量引用错误</strong>.</p>
<p><code>let</code>会在块作用范围的顶部注册，但是当变量在声明前被访问会抛出错误：<code>ReferenceError: &lt;variable&gt; is not defined</code>.从变量声明语句到块作用范围的顶部，变量是在一个临时的死区(Temporal Dead Zone, 简称TDZ)并且不能够被访问.请看以下代码:<br><a href="http://jsbin.com/jodegoy/edit?js,console" target="_blank" rel="external">打开jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">function isTruthy(value) &#123;  </div><div class="line">  var myVariable = &apos;Value 1&apos;;</div><div class="line">  if (value) &#123;</div><div class="line">    /**</div><div class="line">     * temporal dead zone for myVariable</div><div class="line">     */</div><div class="line"></div><div class="line">    console.log(myVariable);// Throws ReferenceError: myVariable is not defined</div><div class="line">    let myVariable = &apos;Value 2&apos;;</div><div class="line">    // end of temporary dead zone for myVariable</div><div class="line">    console.log(myVariable); // =&gt; &apos;Value 2&apos;</div><div class="line">    return true;</div><div class="line">  &#125;</div><div class="line">  return false;</div><div class="line">&#125;</div><div class="line">var m = isTruthy(1); // =&gt; true</div><div class="line">console.log(m)</div></pre></td></tr></table></figure>
<p>在<code>myVariable</code>在从<code>let myVariable</code>到块语句<code>if (value) {...}</code>都是临时死区。如果在这个区间访问变量就会抛出一个引用的错误<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-native-error-types-used-in-this-standard-referenceerror" target="_blank" rel="external">ReferenceError</a></p>
<p>但是这里有一个疑问就是说:是否<code>myVariable</code>真的提升变量声明至在块声明语句中的顶,或者只是在临时死区未定义而已？</p>
<p>一个准确的解释是：当引擎遇到一个包含了<code>let</code>语句的块语句之中的时候，这个变量首先会在块语句顶部声明，在声明状态它仍然不能够被访问，但是它覆盖了作用范围外的同名的变量。之后当<code>let myvAR</code>被传值后，变量在初始化状态就可以被使用了。可以查看这个<a href="https://github.com/getify/You-Dont-Know-JS/issues/767#issuecomment-227946671" target="_blank" rel="external">解释</a></p>
<h1 id="常量-const"><a href="#常量-const" class="headerlink" title="常量:const"></a>常量:const</h1><p>常量<code>const</code>会在块语句顶部被注册。由于<em>临时死区</em>常量不能够在声明之前被访问.<br><code>const</code>提升声明和<code>let</code>语句一致的行为<br>比如以下代码:<br><a href="http://jsbin.com/desugig/edit?js,console" target="_blank" rel="external">打开jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function double(number) &#123;  </div><div class="line">   // temporal dead zone for TWO constant</div><div class="line">   console.log(TWO); // ReferenceError: TWO is not defined</div><div class="line">   const TWO = 2;</div><div class="line">   // end of temporal dead zone</div><div class="line">   return number * TWO;</div><div class="line">&#125;</div><div class="line">double(5); // =&gt; 10</div></pre></td></tr></table></figure>
<h1 id="类声明"><a href="#类声明" class="headerlink" title="类声明"></a>类声明</h1><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_declarations" target="_blank" rel="external">类声明</a>定义了一个包含了名字的构造函数和方法。类声明是ES6的一个很好的补充。类是建立在JavaScript原型继承之上的并且拥有一些其它的优点比如<code>super</code>(用来访问父类），<code>static</code>（用来定义静态方法）,<code>extends</code>(定义子类)还有其它。<br>一个类声明如下:<br><a href="http://jsbin.com/doqelut/edit?js,console" target="_blank" rel="external">打开jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class Point &#123;  </div><div class="line">   constructor(x, y) &#123;</div><div class="line">     this.x = x;</div><div class="line">     this.y = y;     </div><div class="line">   &#125;</div><div class="line">   move(dX, dY) &#123;</div><div class="line">     this.x += dX;</div><div class="line">     this.y += dY;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">// Create an instance</div><div class="line">var origin = new Point(0, 0);  </div><div class="line">// Call a method</div><div class="line">origin.move(50, 100);</div></pre></td></tr></table></figure>
<p>如果在类声明之前访问类就会引发错误，JavaScript会抛出<code>ReferenceError: &lt;name&gt; is not defined</code>的错误。<br>如下代码:<br><a href="http://jsbin.com/budopew/edit?js,console" target="_blank" rel="external">打开jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// Use the Company class</div><div class="line">// Throws ReferenceError: Company is not defined</div><div class="line">var apple = new Company(&apos;Apple&apos;);  </div><div class="line">// Class declaration</div><div class="line">class Company &#123;  </div><div class="line">  constructor(name) &#123;</div><div class="line">    this.name = name;    </div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">// Use correctly the Company class after declaration</div><div class="line">var microsoft = new Company(&apos;Microsoft&apos;);</div></pre></td></tr></table></figure>
<p>也可以用类表达式的方式来创建类。<br>代码如下:<br><a href="http://jsbin.com/vumomeq/edit?js,console" target="_blank" rel="external">打开jsbin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Use the Sqaure class</div><div class="line">console.log(typeof Square);   // =&gt; &apos;undefined&apos;  </div><div class="line">//Throws TypeError: Square is not a constructor</div><div class="line">var mySquare = new Square(10);  </div><div class="line">// Class declaration using variable statement</div><div class="line">var Square = class &#123;  </div><div class="line">  constructor(sideLength) &#123;</div><div class="line">    this.sideLength = sideLength;    </div><div class="line">  &#125;</div><div class="line">  getArea() &#123;</div><div class="line">    return Math.pow(this.sideLength, 2);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">// Use correctly the Square class after declaration</div><div class="line">var otherSquare = new Square(5);</div></pre></td></tr></table></figure>
<p>因为<code>Square</code>类声明提升到作用域的顶端，在类声明行之前都是<code>undefined</code>的值，所以当在类声明之前用<code>var mySquare = new Square(10)</code>会导致JavaScript抛出错误<code>TypeError: Square is not a constructor</code>.</p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p><code>Hoisting</code>很容易理解，但是是经常忽视了JavaScript语言的细微差别。没有清晰地理解提升声明，你的程序将会容易受微妙bug的影响.为了帮助解决这个问题，很多开发者（和linting语法校验工具）主张在每个脚本作用范围的顶端单独写变量声明的语句。因为本质上这是JavaScript解析器如何解析你的代码，这条规则是有效的-即使我会因为打破这条规则而内疚。<br>有一个地方就是关于函数的提升声明，如果当程序员想要在源文件的顶部知道函数是如何调用的而不用滚动到函数声明的地方去查看函数的详细实现细节，例如<a href="https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md#bindable-members-up-top" target="_blank" rel="external">看这里</a>来查看这种技术是如何增加了<em>Angular</em>控制器的可读成性的.</p>
<p>以上文字译自<a href="https://www.sitepoint.com/back-to-basics-javascript-hoisting/" target="_blank" rel="external">Back to Basics: JavaScript Hoisting</a>和<a href="https://rainsoft.io/javascript-hoisting-in-details/" target="_blank" rel="external">javascript-hoisting-in-details</a>,文字方面有进行过相关的缩略。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/08/13/JavaScript-hoisting/" data-id="cjeebrsf5000smiklsjhp7de4" class="article-share-link">分享到</a><div class="tags"><a href="/tags/FrontEnd/">FrontEnd</a><a href="/tags/Hoisting/">Hoisting</a></div><div class="post-nav"><a href="/2017/08/20/Bootstrap-affix-源码解读/" class="pre">Bootstrap affix 源码解读</a><a href="/2017/08/10/Token-based-auth/" class="next">Token-based-auth</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'troland';
var disqus_identifier = '2017/08/13/JavaScript-hoisting/';
var disqus_title = 'JavaScript-hoisting';
var disqus_url = 'http://yoursite.com/2017/08/13/JavaScript-hoisting/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/favicon.ico',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//troland.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Backend/">Backend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Essays/">Essays</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/Source/">Source</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/backend/">backend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/Essays/">Essays</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/express/" style="font-size: 15px;">express</a> <a href="/tags/FrontEnd/" style="font-size: 15px;">FrontEnd</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/scrollSpy/" style="font-size: 15px;">scrollSpy</a> <a href="/tags/offset/" style="font-size: 15px;">offset</a> <a href="/tags/position/" style="font-size: 15px;">position</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/Dom/" style="font-size: 15px;">Dom</a> <a href="/tags/CurrentTarget/" style="font-size: 15px;">CurrentTarget</a> <a href="/tags/app/" style="font-size: 15px;">app</a> <a href="/tags/mui/" style="font-size: 15px;">mui</a> <a href="/tags/hybrid/" style="font-size: 15px;">hybrid</a> <a href="/tags/affix/" style="font-size: 15px;">affix</a> <a href="/tags/Hoisting/" style="font-size: 15px;">Hoisting</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/babel/" style="font-size: 15px;">babel</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/pageYOffset/" style="font-size: 15px;">pageYOffset</a> <a href="/tags/token/" style="font-size: 15px;">token</a> <a href="/tags/jwt/" style="font-size: 15px;">jwt</a> <a href="/tags/jsonwebtoken/" style="font-size: 15px;">jsonwebtoken</a> <a href="/tags/Mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/viewport/" style="font-size: 15px;">viewport</a> <a href="/tags/Design-Pattern/" style="font-size: 15px;">Design Pattern</a> <a href="/tags/Event-Proxy/" style="font-size: 15px;">Event Proxy</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/microtask/" style="font-size: 15px;">microtask</a> <a href="/tags/task/" style="font-size: 15px;">task</a> <a href="/tags/event-loop/" style="font-size: 15px;">event loop</a> <a href="/tags/animate/" style="font-size: 15px;">animate</a> <a href="/tags/css3/" style="font-size: 15px;">css3</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/人生感悟/" style="font-size: 15px;">人生感悟</a> <a href="/tags/愉快生活/" style="font-size: 15px;">愉快生活</a> <a href="/tags/fixed/" style="font-size: 15px;">fixed</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/02/08/babel-runtime-babel-preset-env-babel-plugin-transform-runtime-babel-polyfill-详解/">babel-runtime, babel-preset-env, babel-plugin-transform-runtime, babel-polyfill 详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/13/Dcloud-个推总结/">DCloud 个推总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/任务，微任务，队列，计划/">任务，微任务，队列，计划</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/16/第五种定位属性/">第五种定位属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/09/常用-Git-命令及工作流/">常用 Git 命令及工作流</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/两种视口的故事系列之二/">两种视口的故事系列之二</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/03/两种视窗的故事系列之一/">两种视口的故事系列之一</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/19/事件委托，事件代理，发布者订阅者模式/">事件委托，事件代理，发布者订阅者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/12/动画收集/">动画收集</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/28/DOM相关/">DOM相关</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//troland.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.w.com/" title="医方" target="_blank">医方</a><ul></ul><a href="https://github.com/Troland" title="我的Github" target="_blank">我的Github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Poeticlife.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>